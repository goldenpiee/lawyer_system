{% extends 'base.html' %}
{% block content %}
<div class="container" style="max-width: 420px;">
    <h2 class="mb-4 text-center">Сброс пароля</h2>
    <form method="post" class="p-4 rounded shadow-sm" style="background: #f8f9fa;">
        {% csrf_token %}
        {% if form.errors %}
            <div class="alert alert-danger">
                {% for field in form %}
                    {% for error in field.errors %}
                        {{ error }}<br>
                    {% endfor %}
                {% endfor %}
                {% for error in form.non_field_errors %}
                    {{ error }}<br>
                {% endfor %}
            </div>
        {% endif %}
        <div class="mb-3">
            {{ form.code.label_tag }}
            <input type="text"
                   name="{{ form.code.name }}"
                   class="form-control password-reset-field"
                   id="id_code"
                   placeholder="Введите код из email"
                   maxlength="6"
                   required
                   value="{{ form.code.value|default:'' }}">
        </div>
        <div class="mb-3">
            {{ form.new_password1.label_tag }}
            <input type="password"
                   name="{{ form.new_password1.name }}"
                   class="form-control password-reset-field"
                   id="id_new_password1"
                   placeholder="Новый пароль"
                   required>
        </div>
        <div class="mb-3">
            {{ form.new_password2.label_tag }}
            <input type="password"
                   name="{{ form.new_password2.name }}"
                   class="form-control password-reset-field"
                   id="id_new_password2"
                   placeholder="Повторите новый пароль"
                   required>
        </div>
        <button type="submit" class="btn btn-success w-100">Сменить пароль</button>
    </form>
    <div class="mt-3 text-center">
        <a href="{% url 'accounts:login' %}">Войти</a>
    </div>
</div>
<style>
.password-reset-field {
    background: #fffbe6 !important;
    border: 2px solid #ffe58f !important;
    font-weight: 500;
    box-shadow: 0 0 0 2px #ffe58f33;
}
@media (max-width: 576px) {
    .form-control, .btn {
        font-size: 0.97rem;
        padding: 8px 10px;
    }
    h2 {
        font-size: 1.2rem;
    }
}
</style>
{% endblock %}
